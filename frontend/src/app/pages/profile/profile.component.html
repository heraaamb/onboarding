<p-toast></p-toast>

<!-- Full-screen container with padding and background -->
<div class="absolute top-32 left-1/2 transform -translate-x-1/2 w-full flex justify-center">
  <div class="w-full max-w-3xl">

    <!-- Responsive profile card using PrimeNG's p-panel -->
    <p-panel
      header="Employee Profile"
      [toggleable]="true"
      styleClass="w-full max-w-3xl shadow-xl rounded-lg bg-white border border-gray-200">

      <!-- Custom header (optional styling) -->
      <ng-template pTemplate="header">
        <div class="flex items-center justify-between">
          <span class="text-xl font-semibold text-blue-700">Employee Profile</span>
        </div>
      </ng-template>

      <!-- Loading State -->
      <div *ngIf="!employee" class="text-center py-8 text-gray-500">
        <i class="pi pi-spin pi-spinner text-2xl text-primary"></i>
        <p class="text-lg">Loading employee data...</p>
      </div>

      <!-- Profile Display -->
      <div *ngIf="employee as emp" class="p-8 space-y-6 text-gray-700 text-base">

        <!-- Photo at the top -->
        <div class="flex justify-center mb-6">
          <div
            class="w-32 h-32 rounded-full bg-blue-100 flex items-center justify-center text-4xl font-bold text-blue-700 uppercase shadow-xl">
            {{ emp.employee_name ? emp.employee_name.charAt(0) : '' }}
          </div>
        </div>

        <!-- Name & Role -->
        <div class="flex items-center gap-6 mb-6">
          <div>
            <h2 class="text-3xl font-semibold text-gray-800">{{ emp.employee_name || 'Employee Name' }}</h2>
            <p class="text-gray-600 text-lg">{{ emp.role || 'Role' }}</p>
          </div>
        </div>

        <!-- Email -->
        <div class="flex items-center gap-4 mb-5">
          <i class="pi pi-envelope text-blue-500 text-xl"></i>
          <span class="text-lg"><strong>Email:</strong> {{ emp.email }}</span>
        </div>

        <!-- Department -->
        <div class="flex items-center gap-4 mb-5">
          <i class="pi pi-building text-green-500 text-xl"></i>
          <span class="text-lg"><strong>Department:</strong> {{ emp.department_name }}</span>
        </div>

        <!-- Date Joined -->
        <div class="flex items-center gap-4 mb-6">
          <i class="pi pi-calendar text-purple-500 text-xl"></i>
          <span class="text-lg"><strong>Date Joined:</strong> {{ formattedJoiningDate }}</span>
        </div>

        <!-- Change Password Trigger -->
        <div class="text-right mt-6 px-8">
          <button class="text-blue-600 hover:underline text-sm" (click)="showChangePassword = !showChangePassword">
            {{ showChangePassword ? 'Cancel' : 'Change Password' }}
          </button>
        </div>

        <!-- Change Password Form -->
        <div *ngIf="showChangePassword" class="px-8 pt-4 pb-6">
          <div class="bg-gray-50 p-6 rounded-lg shadow border border-gray-200 space-y-4 max-w-xl mx-auto">
            <h3 class="text-xl font-semibold text-gray-800 mb-2">Change Password</h3>

            <div class="space-y-2">
              <label class="block text-sm font-medium text-gray-600">Current Password</label>
              <input type="password" [(ngModel)]="currentPassword" class="w-full p-2 border rounded focus:outline-none focus:ring focus:border-blue-400" />
            </div>

            <div class="space-y-2">
              <label class="block text-sm font-medium text-gray-600">New Password</label>
              <input type="password" [(ngModel)]="newPassword" class="w-full p-2 border rounded focus:outline-none focus:ring focus:border-blue-400" />
            </div>

            <div class="space-y-2">
              <label class="block text-sm font-medium text-gray-600">Confirm New Password</label>
              <input type="password" [(ngModel)]="confirmPassword" class="w-full p-2 border rounded focus:outline-none focus:ring focus:border-blue-400" />
            </div>

            <div class="text-right pt-4">
              <button pButton type="button" label="Update Password" class="p-button-success" (click)="changePassword()"></button>
            </div>
          </div>
        </div>


      </div>
    </p-panel>

  </div>
</div>
